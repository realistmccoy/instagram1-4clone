"use strict";function filepickerDirective(e,r,t){return{restrict:"A",scope:{onSuccess:"&"},link:function(t,i,o){var n,c;i.bind("change",function(r){r.preventDefault(),t.onSuccess({event:r.originalEvent||r}),e.$apply()}),i=i.length?i[0]:i;for(n in o.$attr)c=o.$attr[n],i.setAttribute(c,o[n]);r.constructWidget(i)}}}function filepickerService(e){return e.filepicker}function filepickerPreviewDirective(e,r){return{restrict:"A",scope:{url:"="},link:function(e,r,t){function i(e){e&&(e=e.replace("api/file/","api/preview/"),n.src=e)}var o=e.url,n=document.createElement("iframe");n.src=o,n.width="100%",n.height="100%",angular.element(r).append(n),e.$watch("url",i)}}}function fpUtilService(){function e(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&("[object Object]"!==Object.prototype.toString.call(e[i])?t.push(i+"="+e[i]):t.push(r(e[i])));return t.join("&")}function r(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")}return{toParams:e,serialize:r}}function fpConvert(e,r){return function(t,i){var o=e("fpUrlFilter")(t);return o&&i?o+"/convert?"+r.toParams(i):void 0}}filepickerDirective.$inject=["e","r","i"],filepickerService.$inject=["e"],filepickerPreviewDirective.$inject=["e","r"],fpConvert.$inject=["e","r"],angular.module("angular-filepicker",[]),window.filepicker=window.filepicker||{},window.filepicker.plugin="angular_js_lib",angular.module("angular-filepicker").directive("filepicker",filepickerDirective),filepickerDirective.$inject=["$rootScope","filepickerService","$parse"],angular.module("angular-filepicker").provider("filepicker",function(){this.$get=function(){return window.filepicker},this.setKey=function(e){try{window.filepicker.setKey(e)}catch(r){console.error("Include filepicker.js script")}}}),angular.module("angular-filepicker").service("filepickerService",filepickerService),filepickerService.$inject=["$window"],angular.module("angular-filepicker").directive("filepickerPreview",filepickerPreviewDirective),filepickerPreviewDirective.$inject=["$rootScope","filepickerService"],angular.module("angular-filepicker").service("fpUtilService",fpUtilService),angular.module("angular-filepicker").filter("fpConvert",fpConvert),fpConvert.$inject=["$filter","fpUtilService"],angular.module("angular-filepicker").filter("fpUrlFilter",function(){return function(e){if(!e)return"";var r=["/convert","/metadata","?"];for(var t in r){var i=e.indexOf(r[t]);if(i>-1)return e.substr(0,i)}return e}});var App;!function(e){angular.module("app",["ngMaterial","ngRoute","ngResource","angular-filepicker","ngAnimate"]).config(["filepickerProvider","$routeProvider","$locationProvider","$httpProvider",function(e,r,t,i){r.when("/",{templateUrl:"/templates/Home.html",controller:app.Controllers.HomeController,controllerAs:"vm"}).when("/register",{templateUrl:"/templates/register.html",controller:app.Controllers.UserController,controllerAs:"vm"}).when("/login",{templateUrl:"/templates/login.html",controller:app.Controllers.UserController,controllerAs:"vm"}).when("/camera",{templateUrl:"/templates/camera.html",controller:app.Controllers.pickerController,controllerAs:"vm"}).when("/profile",{templateUrl:"/templates/profile.html",controller:app.Controllers.profileController,controllerAs:"vm"}).when("/userComment/:id",{templateUrl:"/templates/userComment.html",controller:app.Controllers.UcController,controllerAs:"vm"}).when("/activity",{templateUrl:"/templates/activity.html",controller:app.Controllers.activityController,controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0),i.interceptors.push("HTTPFactory"),e.setKey("AwMr7Yc2nQX2zdOcs5Q1Az")}])}(App||(App={}));var app;!function(e){var r;!function(e){var r=function(){function e(e){this.UserService=e,this.status=e.status}return e.$inject=["UserService"],e.prototype.logout=function(){this.UserService.removeToken(),this.UserService.removeUser()},e}();e.GlobalController=r,angular.module("app").controller("GlobalController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r,t){this.pickerService=e,this.$location=r,this.$routeParams=t,this.comment=e.getAll(t.id)}return e.$inject=["pickerService","$location","$routeParams"],e.prototype.addComment=function(){({message:this.comment})},e}();e.HomeCommentsController=r,angular.module("app").controller("HomeCommentsController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r,t,i){this.HomeService=e,this.likePicturesService=r,this.$routeParams=t,this.$location=i,this.Ppicker=e.getAll(),this.activityPop=r.getAll()}return e.$inject=["HomeService","likePicturesService","$routeParams","$location"],e.prototype.likePicture=function(e){var r=this,t={like:e._id};this.likePicturesService.saveLikePicture(t).then(function(e){console.log(e),r.$location.path("/")})},e.prototype.addComment=function(){var e=this,r={message:this.comment,book:this.book._id};this.CommentService.saveComment(r).then(function(r){e.book.comments.push(r)})},e.prototype.deleteComment=function(e){var r=this;this.CommentService.deleteComment(e).then(function(t){r.book.comments.splice(r.book.comments.indexOf(e),1)})},e}();e.HomeController=r,angular.module("app").controller("HomeController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r,t){this.UcService=e,this.$location=r,this.$routeParams=t}return e.$inject=["UcService","$location","$routeParams"],e.prototype.addComment=function(){var e=this,r={message:this.comment.message,UcCom:this.$routeParams.id};this.UcService.saveUc(r).then(function(r){e.$location.path("/")})},e.prototype.deleteComment=function(e){var r=this;this.UcService.deleteUc(e).then(function(t){r.dawg.comments.splice(r.dawg.comments.indexOf(e),1)})},e}();e.UcController=r,angular.module("app").controller("UcController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r){this.UserService=e,this.$location=r}return e.$inject=["UserService","$location"],e.prototype.register=function(){var e=this,r={username:this.user.username,email:this.user.email,password:this.user.password};this.UserService.register(r).then(function(r){e.$location.path("/")})},e.prototype.login=function(){var e=this;this.UserService.login(this.user).then(function(r){e.UserService.setToken(r.token),e.UserService.setUser(),e.$location.path("/")})},e}();e.UserController=r,angular.module("app").controller("UserController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e){this.likePicturesService=e,this.batchPicture=e.getAll()}return e.$inject=["likePicturesService"],e}();e.activityController=r,angular.module("app").controller("activityController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r,t,i,o){this.filepickerService=e,this.$scope=r,this.pickerService=t,this.$location=i,this.$routeParams=o}return e.$inject=["filepickerService","$scope","pickerService","$location","$routeParams"],e.prototype.pickFile=function(){this.filepickerService.pick({mimetype:"image/*"},this.fileUploaded.bind(this))},e.prototype.fileUploaded=function(e){var r=this;this.file=e,this.$scope.$apply(),this.pickerService.savePicker(this.file).then(function(e){r.$location.path("/userComment/"+e._id)})},e}();e.pickerController=r,angular.module("app").controller("pickerController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(){}return e}();e.profileController=r,angular.module("app").controller("profileController",r)}(r=e.Controllers||(e.Controllers={}))}(app||(app={}));var app;!function(e){var r;!function(e){angular.module("app").factory("HTTPFactory",["$window",function(e){return{request:function(r){return r.headers=r.headers||{},r.headers.Accepts="application/json",r.headers["Content-Type"]="application/json",e.localStorage.getItem("token")&&(r.headers.Authorization="Bearer "+e.localStorage.getItem("token")),r}}}])}(r=e.Services||(e.Services={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e){this.$resource=e,this.PickerRes=e("/pUpload/:id",null,{update:{method:"PUT"}})}return e.$inject=["$resource"],e.prototype.getAll=function(){return this.PickerRes.query()},e.prototype.getBook=function(e){return this.BookResource.get({id:e})},e.prototype.getLike=function(e){return this.PickerRes.save(e).$promise},e.prototype.saveComment=function(e){return this.PickerRes.save(e).$promise},e.prototype.updateComment=function(e){return this.PickerRes.update({id:e._id},e).$promise},e.prototype.deleteComment=function(e){return this.PickerRes["delete"]({_id:e}).$promise},e}();e.HomeService=r,angular.module("app").service("HomeService",r)}(r=e.Services||(e.Services={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r){this.$resource=e,this.$window=r,this.UserCommentResource=e("/comments/:id",null,{update:{method:"PUT"}})}return e.$inject=["$resource","$window"],e.prototype.getAll=function(){return this.UserCommentResource.query()},e.prototype.getComment=function(e){return this.UserCommentResource.get({id:e})},e.prototype.saveUc=function(e){return this.UserCommentResource.save(e).$promise},e.prototype.deleteUc=function(e){return this.UserCommentResource["delete"]({id:e._id}).$promise},e.prototype.editUc=function(e){return this.UserCommentResource.update({id:e._id}).$promise},e}();e.UcService=r,angular.module("app").service("UcService",r)}(r=e.Services||(e.Services={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e,r){this.$resource=e,this.$window=r,this.status={_id:null,email:null,username:null},this.UserRegisterResource=e("/users/register"),this.UserLoginResource=e("/users/login"),this.getToken()&&this.setUser()}return e.$inject=["$resource","$window"],e.prototype.login=function(e){return this.UserLoginResource.save(e).$promise},e.prototype.register=function(e){return console.log(e),this.UserRegisterResource.save(e).$promise},e.prototype.setToken=function(e){this.$window.localStorage.setItem("token",e)},e.prototype.getToken=function(){return this.$window.localStorage.getItem("token")},e.prototype.removeToken=function(){this.$window.localStorage.removeItem("token")},e.prototype.removeUser=function(){this.status._id=null,this.status.email=null,this.status.username=null},e.prototype.setUser=function(){var e=JSON.parse(atob(this.$window.localStorage.getItem("token").split(".")[1]));this.status._id=e._id,this.status.email=e.email,this.status.username=e.username},e}();e.UserService=r,angular.module("app").service("UserService",r)}(r=e.Services||(e.Services={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e){this.$resource=e,this.likeResource=e("/likePictures")}return e.$inject=["$resource"],e.prototype.getAll=function(){return this.likeResource.query()},e.prototype.saveLikePicture=function(e){return this.likeResource.save(e).$promise},e}();e.likePicturesService=r,angular.module("app").service("likePicturesService",r)}(r=e.Services||(e.Services={}))}(app||(app={}));var app;!function(e){var r;!function(e){var r=function(){function e(e){this.$resource=e,this.UserInputResource=e("/pUpload/:id",null,{update:{method:"PUT"}})}return e.$inject=["$resource"],e.prototype.addComment=function(){},e.prototype.getAll=function(){return this.UserInputResource.query()},e.prototype.savePicker=function(e){return this.UserInputResource.save(e).$promise},e.prototype.deletePicker=function(e){return this.UserInputResource["delete"]({id:e._id}).$promise},e}();e.pickerService=r,angular.module("app").service("pickerService",r)}(r=e.Services||(e.Services={}))}(app||(app={}));